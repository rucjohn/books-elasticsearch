# 信息输出：查询和分析

虽然可以将 Elasticsearch 作为文档存储并检索文档及其元数据，但真正强大之处在于能够轻松访问基于 Apache Lucene 搜索引擎库构建的全套搜索功能。

Elasticsearch 提供了一个简单、一致的 REST API，用于管理集群、索引和搜索。出于测试目的，你可以轻松地直接从命令行或通过 Kibana 开发控制台提交请求。在应用程序中，可以使用 [Elasticsearch Client](https://www.elastic.co/guide/en/elasticsearch/client/index.html) 进行请求，支持以下语言：`Java`、`JavaScript`、`Go`、`.NET`、`PHP`、`Perl`、`Python`或`Ruby`。

## 搜索

Elasticsearch REST APIs 支持结构化查询、全文查询以及结合二者的复杂查询。结构化查询类似于SQL。例如，可以在`employee`索引中搜索`gender`和`age`字段，并按`hire_date`字段排序。全文查询会找到所有与查询字符串匹配的文档，并按照相关性进行排序返回（与查询字符串的匹配度）。

除了搜索单个术语外，还可以进行短语搜索、相似度搜索和前缀搜索，并得到自动评分。

地理空间或其他数字数据是否也能搜索？Elasticsearch 在优化的数据结构中索引非文本数据也支持高性能的地理和数据查询。

可以使用 Elasticsearch 全面的 JSON 样式查询语言（Query DSL）访问所有这些搜索功能。还可以构造 SQL 样式的查询，以便在 Elasticsearch 内部本地搜索和聚合数据，并且 JDBC 和 ODBC 驱动程序使范围广泛的第三方应用程序也能够通过 SQL 与 Elasticsearch 交互。

## 分析

Elasticsearch 聚合能够构建复杂的数据摘要，并且深入了解关键指标、模式和趋势。通过汇总，不仅能找到众所周知的『大海捞针』，而是还可以解决以下问题：
- 大海有多少根针？
- 平均每根针有多长？
- 按厂家分类，每类针中间范围的针的长度是多少？
- 在过去六个月，每个月捞针的总数是多少？

你还可以通过聚合解决更细微的问题，例如：
- 最受欢迎的针的厂家是哪一家？
- 是否有坏的针？

由于聚合利用搜索时采用相同的数据结构，所以非常快。这使得能够实时分析和可视化数据。报表和仪表盘会随着数据动态更新，可以根据最新信息采取操作。

此外，聚合和搜索可以一起操作，能在一次请求中同时搜索文档、筛选结果并对数据执行分析。由于聚合是在特定的搜索上下文中计算的，因此如：不仅显示所有70号针头的总数，还可以显示与用户搜索条件匹配的70号针头的总数，例如，70号不锈钢针头


## 等等，还有......

想自动分析时间序列数据呢？可以使用[机器学习](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyze.html#analyze-data)功能，在数据中创建正常行为的准确基线，并识别异常模式。机器学习可以检测到：
- 与值、计数和频率的时间偏差有关的异常
- 统计稀有度
- 群体中某个成员的不寻常行为

最关键呢？您无需指定算法、模型和其他与数据科学相关的配置就可以做这一点。
